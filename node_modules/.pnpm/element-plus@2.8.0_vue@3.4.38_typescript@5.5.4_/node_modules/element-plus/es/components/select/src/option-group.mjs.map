{"version":3,"file":"option-group.mjs","sources":["../../../../../../packages/components/select/src/option-group.vue"],"sourcesContent":["<template>\n  <ul v-show=\"visible\" ref=\"groupRef\" :class=\"ns.be('group', 'wrap')\">\n    <li :class=\"ns.be('group', 'title')\">{{ label }}</li>\n    <li>\n      <ul :class=\"ns.b('group')\">\n        <slot />\n      </ul>\n    </li>\n  </ul>\n</template>\n\n<script lang=\"ts\">\n// @ts-nocheck\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  toRefs,\n} from 'vue'\nimport { useMutationObserver } from '@vueuse/core'\nimport { ensureArray } from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport { selectGroupKey } from './token'\n\nexport default defineComponent({\n  name: 'ElOptionGroup',\n  componentName: 'ElOptionGroup',\n\n  props: {\n    /**\n     * @description name of the group\n     */\n    label: String,\n    /**\n     * @description whether to disable all options in this group\n     */\n    disabled: Boolean,\n  },\n  setup(props) {\n    const ns = useNamespace('select')\n    const groupRef = ref(null)\n    const instance = getCurrentInstance()\n    const children = ref([])\n\n    provide(\n      selectGroupKey,\n      reactive({\n        ...toRefs(props),\n      })\n    )\n\n    const visible = computed(() =>\n      children.value.some((option) => option.visible === true)\n    )\n\n    const isOption = (node) =>\n      node.type?.name === 'ElOption' && !!node.component?.proxy\n\n    // get all instances of options\n    const flattedChildren = (node) => {\n      const Nodes = ensureArray(node)\n      const children = []\n\n      Nodes.forEach((child) => {\n        if (isOption(child)) {\n          children.push(child.component.proxy)\n        } else if (child.children?.length) {\n          children.push(...flattedChildren(child.children))\n        } else if (child.component?.subTree) {\n          children.push(...flattedChildren(child.component.subTree))\n        }\n      })\n\n      return children\n    }\n\n    const updateChildren = () => {\n      children.value = flattedChildren(instance.subTree)\n    }\n\n    onMounted(() => {\n      updateChildren()\n    })\n\n    useMutationObserver(groupRef, updateChildren, {\n      attributes: true,\n      subtree: true,\n      childList: true,\n    })\n\n    return {\n      groupRef,\n      visible,\n      ns,\n    }\n  },\n})\n</script>\n"],"names":["ensureArray","_withDirectives","_openBlock","_createElementBlock","_normalizeClass","_createElementVNode","_toDisplayString"],"mappings":"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"}