"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=require("../../v-x-e-table"),_utils=require("../../tools/utils"),_dom=require("../../tools/dom"),_vn=require("../../tools/vn");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=exports.default=(0,_vue.defineComponent)({name:"VxeTableFilterPanel",props:{filterStore:Object},setup(c){const s=(0,_vue.inject)("$xetable",{}),{reactData:o,internalData:u,getComputeMaps:e}=s,n=e()["computeFilterOpts"],v=(0,_vue.computed)(()=>{var e=c["filterStore"];return e&&e.options.some(e=>e.checked)}),f=e=>{var t=c["filterStore"];t.options.forEach(e=>{e.checked=e._checked}),s.confirmFilterEvent(e)},i=(e,t,l)=>{var r=c["filterStore"];r.options.forEach(e=>{e._checked=!1}),l._checked=t,s.checkFilterOptions(),f(e)},_=e=>{var t=c["filterStore"];s.handleClearFilter(t.column),s.confirmFilterEvent(e)},a=(e,t,l)=>{l._checked=t,s.checkFilterOptions()},d=(e,t,l)=>{var r=c["filterStore"];r.multiple?a(0,t,l):i(e,t,l)},p=(e,t)=>{var l,r=c["filterStore"];r.multiple?(l=t,(r=c.filterStore).options.forEach(e=>{e._checked=l,e.checked=l}),r.isAllSelected=l,r.isIndeterminate=!1):_(e)},h={changeRadioOption:i,changeMultipleOption:a,changeAllOption:p,changeOption:d,confirmFilter:f,resetFilter:_};return()=>{var e=c["filterStore"],t=o["initStore"],l=e["column"],l=l?l.filterRender:null,r=l?_vXETable.VXETable.renderer.get(l.name):null,i=r?r.filterClassName:"",a=Object.assign({},u._currFilterParams,{$panel:h,$table:s});return(0,_vue.h)("div",{class:["vxe-table--filter-wrapper","filter--prevent-default",(0,_dom.getPropClass)(i,a),{"is--animat":s.props.animat,"is--multiple":e.multiple,"is--active":e.visible}],style:e.style},t.filter&&e.visible?((e,t)=>{const l=c["filterStore"],{column:r,multiple:i,maxHeight:a}=l;var o=r["slots"],o=o?o.filter:null,n=Object.assign({},u._currFilterParams,{$panel:h,$table:s});return o?[(0,_vue.h)("div",{class:"vxe-table--filter-template"},s.callSlot(o,n))]:t&&t.renderFilter?[(0,_vue.h)("div",{class:"vxe-table--filter-template"},(0,_vn.getSlotVNs)(t.renderFilter(e,n)))]:(o=i?l.isAllSelected:!l.options.some(e=>e._checked),t=i&&l.isIndeterminate,[(0,_vue.h)("ul",{class:"vxe-table--filter-header"},[(0,_vue.h)("li",{class:["vxe-table--filter-option",{"is--checked":o,"is--indeterminate":t}],title:_conf.default.i18n(i?"vxe.table.allTitle":"vxe.table.allFilter"),onClick:e=>{p(e,!l.isAllSelected)}},(i?[(0,_vue.h)("span",{class:["vxe-checkbox--icon",t?_conf.default.icon.TABLE_CHECKBOX_INDETERMINATE:o?_conf.default.icon.TABLE_CHECKBOX_CHECKED:_conf.default.icon.TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([(0,_vue.h)("span",{class:"vxe-checkbox--label"},_conf.default.i18n("vxe.table.allFilter"))]))]),(0,_vue.h)("ul",{class:"vxe-table--filter-body",style:a?{maxHeight:a+"px"}:{}},l.options.map(t=>{var e=t._checked;return(0,_vue.h)("li",{class:["vxe-table--filter-option",{"is--checked":t._checked}],title:t.label,onClick:e=>{d(e,!t._checked,t)}},(i?[(0,_vue.h)("span",{class:["vxe-checkbox--icon",e?_conf.default.icon.TABLE_CHECKBOX_CHECKED:_conf.default.icon.TABLE_CHECKBOX_UNCHECKED]})]:[]).concat([(0,_vue.h)("span",{class:"vxe-checkbox--label"},(0,_utils.formatText)(t.label,1))]))}))])})(l,r).concat((()=>{var e=c["filterStore"],{column:t,multiple:l}=e,r=n.value,i=v.value,t=t.filterRender,t=t?_vXETable.VXETable.renderer.get(t.name):null,i=!i&&!e.isAllSelected&&!e.isIndeterminate;return!l||t&&!1===t.showFilterFooter?[]:[(0,_vue.h)("div",{class:"vxe-table--filter-footer"},[(0,_vue.h)("button",{class:{"is--disabled":i},disabled:i,onClick:f},r.confirmButtonText||_conf.default.i18n("vxe.table.confirmFilter")),(0,_vue.h)("button",{onClick:_},r.resetButtonText||_conf.default.i18n("vxe.table.resetFilter"))])]})()):[])}}});