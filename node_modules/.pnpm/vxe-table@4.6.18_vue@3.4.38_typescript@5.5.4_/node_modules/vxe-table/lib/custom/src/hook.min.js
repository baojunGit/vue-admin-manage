"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue");const tableCustomMethodKeys=["openCustom","closeCustom"],customHook={setupTable(o){const{reactData:l,internalData:s}=o,u=o.getComputeMaps()["computeCustomOpts"],{refTableHeader:a,refTableBody:i,refTableCustom:r}=o.getRefMaps(),c=o.xegrid,n=()=>{var e=l["customStore"],t=a.value,o=i.value,s=r.value,s=s?s.$el:null,t=t.$el,o=o.$el;let u=0;t&&(u+=t.clientHeight),o&&(u+=o.clientHeight),e.maxHeight=Math.max(0,s?Math.min(s.clientHeight,u-80):0)},m=()=>{var{initStore:e,customStore:t}=l;return t.visible=!0,e.custom=!0,l.customColumnList=s.collectColumn.slice(0),b(),n(),(0,_vue.nextTick)().then(()=>n())},v=()=>{var e=l["customStore"],t=u.value;return e.visible&&(e.visible=!1,t.immediate||o.handleCustom()),(0,_vue.nextTick)()};var e={openCustom:m,closeCustom:v};const b=()=>{var e=l["customStore"],t=s["collectColumn"];const o=u.value["checkMethod"];e.isAll=t.every(e=>!!o&&!o({column:e})||e.visible),e.isIndeterminate=!e.isAll&&t.some(e=>(!o||o({column:e}))&&(e.visible||e.halfVisible))},C=(e,t)=>{(c||o).dispatchEvent("custom",{type:e},t)};var t={checkCustomStatus:b,emitCustomEvent:C,triggerCustomEvent(e){var t=o.reactData["customStore"];t.visible?(v(),C("close",e)):(t.btnEl=e.target,m(),C("open",e))},customOpenEvent(e){var t=l["customStore"];t.visible||(t.activeBtn=!0,t.btnEl=e.target,o.openCustom(),o.emitCustomEvent("open",e))},customColseEvent(e){var t=l["customStore"];t.visible&&(t.activeBtn=!1,o.closeCustom(),o.emitCustomEvent("close",e))}};return Object.assign(Object.assign({},e),t)},setupGrid(e){return e.extendTableMethods(tableCustomMethodKeys)}};var _default=exports.default=customHook;