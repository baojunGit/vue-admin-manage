"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=require("../../v-x-e-table"),_utils=require("../../tools/utils"),_vn=require("../../tools/vn"),_render=require("./render"),_util=require("./util");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const VxeFormConfigItem=(0,_vue.defineComponent)({name:"VxeFormConfigItem",props:{itemConfig:Object},setup(L){const X=(0,_vue.inject)("$xeform",{});var e={itemConfig:L.itemConfig};(0,_vue.provide)("$xeformiteminfo",e),(0,_vue.provide)("$xeformgather",null);return{renderVN:()=>{var e=X["reactData"],{data:t,rules:i,span:l,align:n,titleAlign:s,titleWidth:r,titleColon:o,titleAsterisk:u,titleOverflow:a,vertical:d}=X.props,f=X.getComputeMaps()["computeValidOpts"],m=L.itemConfig,e=e["collapseAll"],f=f.value,{slots:v,title:_,visible:c,folding:R,field:x,collapseNode:$,itemRender:g,showError:j,errRule:p,className:h,titleOverflow:C,vertical:U,children:N,showTitle:k,contentClassName:F,contentStyle:q,titleClassName:b,titleStyle:y}=m,O=(0,_utils.isEnableConf)(g)?_vXETable.VXETable.renderer.get(g.name):null,T=O?O.itemClassName:"",V=O?O.itemStyle:null,w=O?O.itemContentClassName:"",A=O?O.itemContentStyle:null,E=O?O.itemTitleClassName:"",I=O?O.itemTitleStyle:null,D=v?v.default:null,v=v?v.title:null,l=m.span||l,n=m.align||n,s=_xeUtils.default.eqNull(m.titleAlign)?s:m.titleAlign,r=_xeUtils.default.eqNull(m.titleWidth)?r:m.titleWidth,o=_xeUtils.default.eqNull(m.titleColon)?o:m.titleColon,u=_xeUtils.default.eqNull(m.titleAsterisk)?u:m.titleAsterisk,a=_xeUtils.default.isUndefined(C)||_xeUtils.default.isNull(C)?a:C,C=_xeUtils.default.isUndefined(U)||_xeUtils.default.isNull(U)?d:U,d="title"===a,U=!0===a||"tooltip"===a,a=d||U||"ellipsis"===a;const M={data:t,field:x,property:x,item:m,$form:X,$grid:X.xegrid};if(!1===c)return(0,_vue.createCommentVNode)();let W=!1;if(i&&(c=i[x])&&(W=c.some(e=>e.required)),N&&0<N.length)return(i=N.map((e,t)=>(0,_vue.h)(VxeFormConfigItem,{key:t,itemConfig:e}))).length?(0,_vue.h)("div",{class:["vxe-form--gather vxe-form--item-row",m.id,l?`vxe-form--item-col_${l} is--span`:"",h?_xeUtils.default.isFunction(h)?h(M):h:""]},i):(0,_vue.createCommentVNode)();let S=[];D?S=X.callSlot(D,M):O&&O.renderItemContent?S=(0,_vn.getSlotVNs)(O.renderItemContent(g,M)):x&&(S=[_xeUtils.default.toValueString(_xeUtils.default.get(t,x))]),$&&S.push((0,_vue.h)("div",{class:"vxe-form--item-trigger-node",onClick:X.toggleCollapseEvent},[(0,_vue.h)("span",{class:"vxe-form--item-trigger-text"},e?_conf.default.i18n("vxe.form.unfolding"):_conf.default.i18n("vxe.form.folding")),(0,_vue.h)("i",{class:["vxe-form--item-trigger-icon",e?_conf.default.icon.FORM_FOLDING:_conf.default.icon.FORM_UNFOLDING]})])),p&&f.showMessage&&S.push((0,_vue.h)("div",{class:"vxe-form--item-valid",style:p.maxWidth?{width:p.maxWidth+"px"}:null},p.content));c=U?{onMouseenter(e){X.triggerTitleTipEvent(e,M)},onMouseleave:X.handleTitleTipLeaveEvent}:{};return(0,_vue.h)("div",{class:["vxe-form--item",m.id,l?`vxe-form--item-col_${l} is--span`:"",h?_xeUtils.default.isFunction(h)?h(M):h:"",T?_xeUtils.default.isFunction(T)?T(M):T:"",{"is--title":_,"is--colon":o,"is--vertical":C,"is--asterisk":u,"is--required":W,"is--hidden":R&&e,"is--active":(0,_util.isActivetem)(X,m),"is--error":j}],style:_xeUtils.default.isFunction(V)?V(M):V},[(0,_vue.h)("div",{class:"vxe-form--item-inner"},[!1!==k&&(_||v)?(0,_vue.h)("div",Object.assign({class:["vxe-form--item-title",s?"align--"+s:"",a?"is--ellipsis":"",E?_xeUtils.default.isFunction(E)?E(M):E:"",b?_xeUtils.default.isFunction(b)?b(M):b:""],style:Object.assign({},_xeUtils.default.isFunction(I)?I(M):I,_xeUtils.default.isFunction(y)?y(M):y,r?{width:isNaN(r)?r:r+"px"}:null),title:d?(0,_utils.getFuncText)(_):null},c),(0,_render.renderTitle)(X,m)):null,(0,_vue.h)("div",{class:["vxe-form--item-content",n?"align--"+n:"",w?_xeUtils.default.isFunction(w)?w(M):w:"",F?_xeUtils.default.isFunction(F)?F(M):F:""],style:Object.assign({},_xeUtils.default.isFunction(A)?A(M):A,_xeUtils.default.isFunction(q)?q(M):q)},S)])])}}},render(){return this.renderVN()}});var _default=exports.default=VxeFormConfigItem;