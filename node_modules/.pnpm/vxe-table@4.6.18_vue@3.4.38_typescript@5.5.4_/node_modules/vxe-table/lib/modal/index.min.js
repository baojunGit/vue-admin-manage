"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modal=exports.default=exports.VxeModal=exports.Modal=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_modal=_interopRequireWildcard(require("./src/modal")),_vXETable=require("../v-x-e-table"),_dynamics=require("../dynamics");function _getRequireWildcardCache(e){var t,o;return"function"!=typeof WeakMap?null:(t=new WeakMap,o=new WeakMap,(_getRequireWildcardCache=function(e){return e?o:t})(e))}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=_getRequireWildcardCache(t);if(t&&t.has(e))return t.get(e);var o,a,l={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in e)"default"!==o&&{}.hasOwnProperty.call(e,o)&&((a=n?Object.getOwnPropertyDescriptor(e,o):null)&&(a.get||a.set)?Object.defineProperty(l,o,a):l[o]=e[o]);return l.default=e,t&&t.set(e,l),l}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function openModal(t){return(0,_dynamics.checkDynamic)(),new Promise(o=>{if(t&&t.id&&_modal.allActiveModals.some(e=>e.props.id===t.id))o("exist");else{const a=t.onHide,l=Object.assign(t,{key:_xeUtils.default.uniqueId(),modelValue:!0,onHide(e){var t=_dynamics.dynamicStore.modals;a&&a(e),_dynamics.dynamicStore.modals=t.filter(e=>e.key!==l.key),o(e.type)}});_dynamics.dynamicStore.modals.push(l)}})}function getModal(t){return _xeUtils.default.find(_modal.allActiveModals,e=>e.props.id===t)}function closeModal(e){e=e?[getModal(e)]:_modal.allActiveModals;const t=[];return e.forEach(e=>{e&&t.push(e.close())}),Promise.all(t)}function handleOpen(e,t,o,a){let l;return l=_xeUtils.default.isObject(t)?t:{content:_xeUtils.default.toValueString(t),title:o},openModal(Object.assign(Object.assign(Object.assign({},e),a),l))}function openAlert(e,t,o){return handleOpen({type:"alert",showFooter:!0},e,t,o)}function openConfirm(e,t,o){return handleOpen({type:"confirm",status:"question",showFooter:!0},e,t,o)}function openMessage(e,t){return handleOpen({type:"message",mask:!1,lockView:!1,showHeader:!1},e,"",t)}const ModalController={get:getModal,close:closeModal,open:openModal,alert:openAlert,confirm:openConfirm,message:openMessage},modal=exports.modal=ModalController,VxeModal=exports.VxeModal=Object.assign(_modal.default,{install:function(e){e.component(_modal.default.name,_modal.default),_vXETable.VXETable.modal=ModalController}}),Modal=exports.Modal=VxeModal;_dynamics.dynamicApp.component(_modal.default.name,_modal.default);var _default=exports.default=VxeModal;