"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_size=require("../../hooks/size"),_utils=require("../../tools/utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=exports.default=(0,_vue.defineComponent)({name:"VxeSwitch",props:{modelValue:[String,Number,Boolean],disabled:Boolean,size:{type:String,default:()=>_conf.default.switch.size||_conf.default.size},openLabel:String,closeLabel:String,openValue:{type:[String,Number,Boolean],default:!0},closeValue:{type:[String,Number,Boolean],default:!1},openIcon:String,closeIcon:String,openActiveIcon:String,closeActiveIcon:String},emits:["update:modelValue","change","focus","blur"],setup(c,e){const u=e["emit"],i=(0,_vue.inject)("$xeform",null),l=(0,_vue.inject)("$xeformiteminfo",null);var t=_xeUtils.default.uniqueId();const r=(0,_size.useSize)(c),v=(0,_vue.reactive)({isActivated:!1,hasAnimat:!1,offsetLeft:0}),a={xID:t,props:c,context:e,reactData:v},d=(0,_vue.ref)();let s={};const _=(0,_vue.computed)(()=>(0,_utils.getFuncText)(c.openLabel)),f=(0,_vue.computed)(()=>(0,_utils.getFuncText)(c.closeLabel)),p=(0,_vue.computed)(()=>c.modelValue===c.openValue);let n;const h=e=>{var t;c.disabled||(t=p.value,clearTimeout(n),t=t?c.closeValue:c.openValue,v.hasAnimat=!0,u("update:modelValue",t),s.dispatchEvent("change",{value:t},e),i&&l&&i.triggerItemEvent(e,l.itemConfig.field,t),n=setTimeout(()=>{v.hasAnimat=!1},400))},m=e=>{v.isActivated=!0,s.dispatchEvent("focus",{value:c.modelValue},e)},b=e=>{v.isActivated=!1,s.dispatchEvent("blur",{value:c.modelValue},e)};s={dispatchEvent(e,t,i){u(e,Object.assign({$switch:a,$event:i},t))},focus(){var e=d.value;return v.isActivated=!0,e.focus(),(0,_vue.nextTick)()},blur(){return d.value.blur(),(v.isActivated=!1,_vue.nextTick)()}},Object.assign(a,s);return a.renderVN=()=>{var{disabled:e,openIcon:t,closeIcon:i,openActiveIcon:u,closeActiveIcon:l}=c,a=p.value,s=r.value,n=_.value,o=f.value;return(0,_vue.h)("div",{class:["vxe-switch",a?"is--on":"is--off",{["size--"+s]:s,"is--disabled":e,"is--animat":v.hasAnimat}]},[(0,_vue.h)("button",{ref:d,class:"vxe-switch--button",type:"button",disabled:e,onClick:h,onFocus:m,onBlur:b},[(0,_vue.h)("span",{class:"vxe-switch--label vxe-switch--label-on"},[t?(0,_vue.h)("i",{class:["vxe-switch--label-icon",t]}):(0,_vue.createCommentVNode)(),n]),(0,_vue.h)("span",{class:"vxe-switch--label vxe-switch--label-off"},[i?(0,_vue.h)("i",{class:["vxe-switch--label-icon",i]}):(0,_vue.createCommentVNode)(),o]),(0,_vue.h)("span",{class:"vxe-switch--icon"},u||l?[(0,_vue.h)("i",{class:a?u:l})]:[])])])},a},render(){return this.renderVN()}});