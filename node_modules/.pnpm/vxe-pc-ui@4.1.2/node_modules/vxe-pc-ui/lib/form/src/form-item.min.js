"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formItemProps=exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_ui=require("../../ui"),_utils=require("../../ui/src/utils"),_vn=require("../../ui/src/vn"),_util=require("./util"),_render=require("./render");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const formItemProps=exports.formItemProps={title:String,field:String,span:[String,Number],align:String,titleBold:{type:Boolean,default:null},titleAlign:{type:String,default:null},titleWidth:{type:[String,Number],default:null},titleColon:{type:Boolean,default:null},titleAsterisk:{type:Boolean,default:null},showTitle:{type:Boolean,default:!0},vertical:{type:Boolean,default:null},padding:{type:Boolean,default:null},className:[String,Function],contentClassName:[String,Function],contentStyle:[Object,Function],titleClassName:[String,Function],titleStyle:[Object,Function],titleOverflow:{type:[Boolean,String],default:null},titlePrefix:Object,titleSuffix:Object,resetValue:{default:null},visibleMethod:Function,visible:{type:Boolean,default:null},folding:Boolean,collapseNode:Boolean,itemRender:Object,rules:Array};var _default=exports.default=(0,_vue.defineComponent)({name:"VxeFormItem",props:formItemProps,setup(e,{slots:t}){const J=(0,_vue.ref)(),K=(0,_vue.inject)("$xeForm",{}),l=(0,_vue.inject)("$xeFormGather",null),Q=(0,_vue.reactive)((0,_util.createItem)(K,e));Q.slots=t;t={itemConfig:Q};(0,_vue.provide)("xeFormItemInfo",t),(0,_util.watchItem)(e,Q),(0,_vue.onMounted)(()=>{(0,_util.assembleItem)(K,J.value,Q,l)}),(0,_vue.onUnmounted)(()=>{(0,_util.destroyItem)(K,Q)});t={formItem:Q,renderVN:()=>{var i=K?K.props:null;if(i&&i.customLayout){var n=K,i=Q,{props:s,reactData:o}=n,{data:r,rules:u,readonly:a,disabled:d,titleBold:m,titleAlign:f,titleWidth:c,titleColon:v,titleAsterisk:_,titleOverflow:p,vertical:k,padding:P}=s,o=o["collapseAll"],W=(W=n.getComputeMaps()["computeValidOpts"]).value,{slots:g,title:x,visible:N,folding:D,field:h,collapseNode:E,itemRender:y,showError:G,errRule:F,className:I,titleOverflow:C,vertical:S,padding:U,showTitle:L,contentClassName:b,contentStyle:q,titleClassName:O,titleStyle:B}=i,T=(0,_utils.isEnableConf)(y)?_ui.renderer.get(y.name):null,j=T?T.formItemClassName||T.itemClassName:"",A=T?T.formItemStyle||T.itemStyle:null,w=T?T.formItemContentClassName||T.itemContentClassName:"",M=T?T.formItemContentStyle||T.itemContentStyle:null,R=T?T.formItemTitleClassName||T.itemTitleClassName:"",V=T?T.formItemTitleStyle||T.itemTitleStyle:null,z=g?g.default:null,g=g?g.title:null,H=i.span||s.span,s=i.align||s.align,P=_xeUtils.default.eqNull(U)?P:U,U=_xeUtils.default.eqNull(S)?k:S,k=_xeUtils.default.eqNull(i.titleBold)?m:i.titleBold,S=_xeUtils.default.eqNull(i.titleAlign)?f:i.titleAlign,m=U?null:_xeUtils.default.eqNull(i.titleWidth)?c:i.titleWidth,f=_xeUtils.default.eqNull(i.titleColon)?v:i.titleColon,c=_xeUtils.default.eqNull(i.titleAsterisk)?_:i.titleAsterisk,p=!0===(v=_xeUtils.default.eqNull(C)?p:C)||"tooltip"===v,C=(_="title"===v)||p||"ellipsis"===v;const $={data:r,disabled:d,readonly:a,field:h,property:h,item:i,$form:n,$grid:n.xegrid};let e=!1,t=!1;if(!1===N)return(0,_vue.createCommentVNode)();!a&&u&&(v=u[h])&&v.length&&(t=!0,e=v.some(e=>e.required));let l=[];return d=T?T.renderFormItemContent||T.renderItemContent:null,z?l=n.callSlot(z,$):d?l=(0,_vn.getSlotVNs)(d(y,$)):h&&(l=[""+_xeUtils.default.get(r,h)]),E&&l.push((0,_vue.h)("div",{class:"vxe-form--item-trigger-node",onClick:n.toggleCollapseEvent},[(0,_vue.h)("span",{class:"vxe-form--item-trigger-text"},o?(0,_ui.getI18n)("vxe.form.unfolding"):(0,_ui.getI18n)("vxe.form.folding")),(0,_vue.h)("i",{class:["vxe-form--item-trigger-icon",o?(0,_ui.getIcon)().FORM_FOLDING:(0,_ui.getIcon)().FORM_UNFOLDING]})])),F&&W.showMessage&&l.push((0,_vue.h)("div",{class:"vxe-form--item-valid",style:F.maxWidth?{width:F.maxWidth+"px"}:null},F.message)),N=p?{onMouseenter(e){n.triggerTitleTipEvent(e,$)},onMouseleave:n.handleTitleTipLeaveEvent}:{},(0,_vue.h)("div",{ref:J,class:["vxe-form--item",i.id,H?`vxe-form--item-col_${H} is--span`:"",I?_xeUtils.default.isFunction(I)?I($):I:"",j?_xeUtils.default.isFunction(j)?j($):j:"",{"is--title":x,"is--colon":f,"is--bold":k,"is--padding":P,"is--vertical":U,"is--asterisk":c,"is--valid":t,"is--required":e,"is--hidden":D&&o,"is--active":(0,_util.isActiveItem)(n,i),"is--error":G}],style:_xeUtils.default.isFunction(A)?A($):A},[(0,_vue.h)("div",{class:"vxe-form--item-inner"},[!1!==L&&(x||g)?(0,_vue.h)("div",Object.assign({class:["vxe-form--item-title",S?"align--"+S:"",C?"is--ellipsis":"",R?_xeUtils.default.isFunction(R)?R($):R:"",O?_xeUtils.default.isFunction(O)?O($):O:""],style:Object.assign({},_xeUtils.default.isFunction(V)?V($):V,_xeUtils.default.isFunction(B)?B($):B,m?{width:isNaN(m)?m:m+"px"}:null),title:_?(0,_utils.getFuncText)(x):null},N),(0,_render.renderTitle)(n,i)):null,(0,_vue.h)("div",{class:["vxe-form--item-content",s?"align--"+s:"",w?_xeUtils.default.isFunction(w)?w($):w:"",b?_xeUtils.default.isFunction(b)?b($):b:""],style:Object.assign({},_xeUtils.default.isFunction(M)?M($):M,_xeUtils.default.isFunction(q)?q($):q)},l)])])}return(0,_vue.h)("div",{ref:J})}};return(0,_vue.provide)("$xeFormItem",t),(0,_vue.provide)("$xeFormGather",null),t},render(){return this.renderVN()}});