"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_ui=require("../../ui"),_utils=require("../../ui/src/utils"),_vn=require("../../ui/src/vn"),_render=require("./render"),_util=require("./util");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const VxeFormConfigItem=(0,_vue.defineComponent)({name:"VxeFormConfigItem",props:{itemConfig:Object},setup(J){const K=(0,_vue.inject)("$xeForm",{});var e={itemConfig:J.itemConfig},e=((0,_vue.provide)("xeFormItemInfo",e),{renderVN:()=>{var e=K["reactData"],{data:t,rules:i,readonly:l,disabled:s,span:n,align:r,titleBold:o,titleAlign:k,titleWidth:R,titleColon:u,titleAsterisk:a,titleOverflow:d,vertical:$,padding:D}=K.props,E=K.getComputeMaps()["computeValidOpts"],m=J.itemConfig,e=e["collapseAll"],E=E.value,{slots:f,title:v,visible:_,folding:W,field:c,collapseNode:B,itemRender:x,showError:G,errRule:g,className:p,titleOverflow:C,vertical:h,padding:N,children:F,showTitle:L,contentClassName:U,contentStyle:I,titleClassName:q,titleStyle:y}=m,O=(0,_utils.isEnableConf)(x)?_ui.renderer.get(x.name):null,S=O?O.formItemClassName||O.itemClassName:"",T=O?O.formItemStyle||O.itemStyle:null,V=O?O.formItemContentClassName||O.itemContentClassName:"",b=O?O.formItemContentStyle||O.itemContentStyle:null,w=O?O.formItemTitleClassName||O.itemTitleClassName:"",A=O?O.formItemTitleStyle||O.itemTitleStyle:null,P=f?f.default:null,f=f?f.title:null,n=m.span||n,r=m.align||r,D=_xeUtils.default.eqNull(N)?D:N,N=_xeUtils.default.eqNull(h)?$:h,$=_xeUtils.default.eqNull(m.titleBold)?o:m.titleBold,h=_xeUtils.default.eqNull(m.titleAlign)?k:m.titleAlign,o=N?null:_xeUtils.default.eqNull(m.titleWidth)?R:m.titleWidth,k=_xeUtils.default.eqNull(m.titleColon)?u:m.titleColon,R=_xeUtils.default.eqNull(m.titleAsterisk)?a:m.titleAsterisk,u=_xeUtils.default.eqNull(C)?d:C,a="title"===u,d=!0===u||"tooltip"===u,C=a||d||"ellipsis"===u;const M={data:t,disabled:s,readonly:l,field:c,property:c,item:m,$form:K,$grid:K.xegrid};if(!1===_)return(0,_vue.createCommentVNode)();let z=!1,H=!1;if(!l&&i&&(u=i[c])&&u.length&&(H=!0,z=u.some(e=>e.required)),F&&0<F.length)return(s=F.map((e,t)=>(0,_vue.h)(VxeFormConfigItem,{key:t,itemConfig:e}))).length?(0,_vue.h)("div",{class:["vxe-form--gather vxe-form--item-row",m.id,n?`vxe-form--item-col_${n} is--span`:"",p?_xeUtils.default.isFunction(p)?p(M):p:""]},s):(0,_vue.createCommentVNode)();let j=[];_=O?O.renderFormItemContent||O.renderItemContent:null,P?j=K.callSlot(P,M):_?j=(0,_vn.getSlotVNs)(_(x,M)):c&&(j=[_xeUtils.default.toValueString(_xeUtils.default.get(t,c))]),B&&j.push((0,_vue.h)("div",{class:"vxe-form--item-trigger-node",onClick:K.toggleCollapseEvent},[(0,_vue.h)("span",{class:"vxe-form--item-trigger-text"},e?(0,_ui.getI18n)("vxe.form.unfolding"):(0,_ui.getI18n)("vxe.form.folding")),(0,_vue.h)("i",{class:["vxe-form--item-trigger-icon",e?(0,_ui.getIcon)().FORM_FOLDING:(0,_ui.getIcon)().FORM_UNFOLDING]})])),g&&E.showMessage&&j.push((0,_vue.h)("div",{class:"vxe-form--item-valid",style:g.maxWidth?{width:g.maxWidth+"px"}:null},g.content)),l=d?{onMouseenter(e){K.triggerTitleTipEvent(e,M)},onMouseleave:K.handleTitleTipLeaveEvent}:{};return(0,_vue.h)("div",{class:["vxe-form--item",m.id,n?`vxe-form--item-col_${n} is--span`:"",p?_xeUtils.default.isFunction(p)?p(M):p:"",S?_xeUtils.default.isFunction(S)?S(M):S:"",{"is--title":v,"is--colon":k,"is--bold":$,"is--padding":D,"is--vertical":N,"is--asterisk":R,"is--valid":H,"is--required":z,"is--hidden":W&&e,"is--active":(0,_util.isActiveItem)(K,m),"is--error":G}],style:_xeUtils.default.isFunction(T)?T(M):T},[(0,_vue.h)("div",{class:"vxe-form--item-inner"},[!1!==L&&(v||f)?(0,_vue.h)("div",Object.assign({class:["vxe-form--item-title",h?"align--"+h:"",C?"is--ellipsis":"",w?_xeUtils.default.isFunction(w)?w(M):w:"",q?_xeUtils.default.isFunction(q)?q(M):q:""],style:Object.assign({},_xeUtils.default.isFunction(A)?A(M):A,_xeUtils.default.isFunction(y)?y(M):y,o?{width:isNaN(o)?o:o+"px"}:null),title:a?(0,_utils.getFuncText)(v):null},l),(0,_render.renderTitle)(K,m)):null,(0,_vue.h)("div",{class:["vxe-form--item-content",r?"align--"+r:"",V?_xeUtils.default.isFunction(V)?V(M):V:"",U?_xeUtils.default.isFunction(U)?U(M):U:""],style:Object.assign({},_xeUtils.default.isFunction(b)?b(M):b,_xeUtils.default.isFunction(I)?I(M):I)},j)])])}});return(0,_vue.provide)("$xeFormGather",null),e},render(){return this.renderVN()}});var _default=exports.default=VxeFormConfigItem;