"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_ui=require("../../ui"),_xeUtils=_interopRequireDefault(require("xe-utils")),_dom=require("../..//ui/src/dom"),_util=require("./util");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=exports.default=(0,_vue.defineComponent)({name:"VxeImage",props:{src:[String,Array],alt:[String,Number],loading:String,title:[String,Number],width:[String,Number],height:[String,Number],showPreview:{type:Boolean,default:()=>(0,_ui.getConfig)().image.showPreview}},emits:["click"],setup(i,e){const u=e["emit"];var t=_xeUtils.default.uniqueId();const a=(0,_vue.inject)("$xeImageGroup",null),l=(0,_vue.ref)();var r=(0,_vue.reactive)({});const n={refElem:l},s=(0,_vue.computed)(()=>{var{width:e,height:t}=i,r={};return e&&t?(r.maxWidth=(0,_dom.toCssUnit)(e),r.maxHeight=(0,_dom.toCssUnit)(t)):(e&&(r.width=(0,_dom.toCssUnit)(e)),t&&(r.height=(0,_dom.toCssUnit)(t))),r}),o=(0,_vue.computed)(()=>{var e=i["src"];return e?(_xeUtils.default.isArray(e)?e:[e]).map(e=>_xeUtils.default.isString(e)?{url:e,alt:""}:{url:e.url,alt:e.alt}):[]}),v=(0,_vue.computed)(()=>{return o.value[0]}),d=(0,_vue.computed)(()=>{var e=v.value;return e?""+(e.url||""):""}),m={},_={xID:t,props:i,context:e,reactData:r,getRefMaps:()=>n,getComputeMaps:()=>m},c={dispatchEvent(e,t,r){u(e,(0,_ui.createEvent)(r,{$image:_},t))}},g=e=>{var t=i["showPreview"],r=o.value,u=d.value;a?a.handleClickImgEvent(e,{url:u}):(t&&u&&(0,_util.openPreviewImage)({urlList:r}),c.dispatchEvent("click",{url:u},e))};Object.assign(_,c,{});return _.renderVN=()=>{var{alt:e,loading:t}=i,r=s.value,u=d.value;return(0,_vue.h)("img",{ref:l,class:"vxe-image",src:u,alt:e,loading:t,style:r,onClick:g})},_},render(){return this.renderVN()}});