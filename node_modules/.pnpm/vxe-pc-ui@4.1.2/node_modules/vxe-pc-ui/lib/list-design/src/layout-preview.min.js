"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_ui=require("../../ui"),_log=require("../../ui/src/log"),_form=_interopRequireDefault(require("../../form/src/form")),_xeUtils=_interopRequireDefault(require("xe-utils"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=exports.default=(0,_vue.defineComponent)({name:"ListDesignLayoutView",props:{},emits:[],setup(){const s=_ui.VxeUI.getComponent("VxeGrid");var e=(0,_vue.inject)("$xeListDesign",null);if(!e)return()=>[];const r=e["reactData"],u=(0,_vue.ref)(),n=(0,_vue.ref)([]),o=(0,_vue.computed)(()=>{var e=r["searchFormItems"];return e.length?e.concat([{field:"active",title:"",folding:!1,collapseNode:e.some(e=>e.folding),itemRender:{name:"VxeButtonGroup",options:[{content:"查询",icon:"vxe-icon-search",status:"primary",type:"submit"},{content:"重置",icon:"vxe-icon-repeat",type:"reset"}]}}]):e}),a=(0,_vue.computed)(()=>{var{formData:e,listTableColumns:t}=r,{showSeq:e,actionButtonList:i}=e;const l=[];return e&&l.push({type:"seq",field:"_seq",width:70}),t.forEach(e=>{l.push({field:e.field,title:e.title,visible:e.visible,width:e.width})}),i&&i.length&&l.push({field:"_active",title:(0,_ui.getI18n)("vxe.table.actionTitle"),fixed:"right",width:"auto",cellRender:{name:"VxeButtonGroup",options:[]}}),l}),v=({column:t,resizeWidth:e})=>{var i=r["listTableColumns"],i=_xeUtils.default.findTree(i,e=>e.field===t.field,{children:"children"});i&&(i=i["item"],i.width=e)},t=()=>{const e=r["listTableColumns"];var t=[{},{}];t.forEach(t=>{e.forEach(e=>{t[e.field]="-"})}),n.value=t},i=(0,_vue.ref)(0);return(0,_vue.watch)(()=>r.listTableColumns?r.listTableColumns.length:-1,()=>{i.value++}),(0,_vue.watch)(()=>r.listTableColumns,()=>{i.value++}),(0,_vue.watch)(i,()=>{t()}),(0,_vue.onMounted)(()=>{t()}),"development"===process.env.NODE_ENV&&(0,_vue.nextTick)(()=>{s||(0,_log.errLog)("vxe.error.reqComp",["vxe-grid"])}),()=>{var{searchFormData:e,searchFormItems:t}=r,i=o.value,l=a.value;return(0,_vue.h)("div",{class:"vxe-list-design--preview"},[(0,_vue.h)("div",{class:"vxe-list-design--preview-wrapper"},[(0,_vue.h)("div",{class:"vxe-list-design--preview-search"},[(0,_vue.h)("div",{class:"vxe-list-design--preview-title"},(0,_ui.getI18n)("vxe.listDesign.searchTitle")),t.length?(0,_vue.h)(_form.default,{data:e,items:i}):(0,_vue.h)("div",{class:"vxe-list-design--field-configs-empty-data"},[(0,_vue.h)("span",{},(0,_ui.getI18n)("vxe.listDesign.search.emptyText"))])]),(0,_vue.h)("div",{class:"vxe-list-design--preview-table"},[(0,_vue.h)("div",{class:"vxe-list-design--preview-title"},(0,_ui.getI18n)("vxe.listDesign.listTitle")),s?(0,_vue.h)(s,{ref:u,columns:l,data:n.value,showOverflow:!0,border:!0,columnConfig:{minWidth:"auto",resizable:!0},rowConfig:{isHover:!0},scrollX:{enabled:!1},scrollY:{enabled:!1},onResizableChange:v}):(0,_vue.createCommentVNode)()])])])}}});