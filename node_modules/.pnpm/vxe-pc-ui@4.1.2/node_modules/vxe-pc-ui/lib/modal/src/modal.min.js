"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.allActiveModals=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_dom=require("../../ui/src/dom"),_utils=require("../../ui/src/utils"),_ui=require("../../ui"),_button=_interopRequireDefault(require("../../button/src/button")),_index=_interopRequireDefault(require("../../loading/index")),_vn=require("../../ui/src/vn"),_log=require("../../ui/src/log");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const allActiveModals=exports.allActiveModals=[],msgQueue=[],notifyQueue=[];var _default=exports.default=(0,_vue.defineComponent)({name:"VxeModal",props:{modelValue:Boolean,id:String,type:{type:String,default:"modal"},loading:{type:Boolean,default:null},status:String,iconStatus:String,className:String,top:{type:[Number,String],default:()=>(0,_ui.getConfig)().modal.top},position:[String,Object],title:String,duration:{type:[Number,String],default:()=>(0,_ui.getConfig)().modal.duration},message:[Number,String],content:[Number,String],showCancelButton:{type:Boolean,default:null},cancelButtonText:{type:String,default:()=>(0,_ui.getConfig)().modal.cancelButtonText},showConfirmButton:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.showConfirmButton},confirmButtonText:{type:String,default:()=>(0,_ui.getConfig)().modal.confirmButtonText},lockView:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.lockView},lockScroll:Boolean,mask:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.mask},maskClosable:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.maskClosable},escClosable:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.escClosable},resize:Boolean,showHeader:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.showHeader},showFooter:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.showFooter},showZoom:Boolean,zoomConfig:Object,showMaximize:{type:Boolean,default:()=>(0,_utils.handleBooleanDefaultValue)((0,_ui.getConfig)().modal.showMaximize)},showMinimize:{type:Boolean,default:()=>(0,_utils.handleBooleanDefaultValue)((0,_ui.getConfig)().modal.showMinimize)},showClose:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.showClose},dblclickZoom:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.dblclickZoom},width:[Number,String],height:[Number,String],minWidth:{type:[Number,String],default:()=>(0,_ui.getConfig)().modal.minWidth},minHeight:{type:[Number,String],default:()=>(0,_ui.getConfig)().modal.minHeight},zIndex:Number,marginSize:{type:[Number,String],default:()=>(0,_ui.getConfig)().modal.marginSize},fullscreen:Boolean,draggable:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.draggable},remember:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.remember},destroyOnClose:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.destroyOnClose},showTitleOverflow:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.showTitleOverflow},transfer:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.transfer},storage:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.storage},storageKey:{type:String,default:()=>(0,_ui.getConfig)().modal.storageKey},padding:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.padding},size:{type:String,default:()=>(0,_ui.getConfig)().modal.size||(0,_ui.getConfig)().size},beforeHideMethod:Function,slots:Object,animat:{type:Boolean,default:()=>(0,_ui.getConfig)().modal.animat}},emits:["update:modelValue","show","hide","before-hide","close","confirm","cancel","zoom","resize","move"],setup(C,e){const{slots:N,emit:v}=e;var t=_xeUtils.default.uniqueId();const S=(0,_ui.useSize)(C)["computeSize"],k=(0,_vue.reactive)({initialized:!1,visible:!1,contentVisible:!1,modalTop:0,modalZindex:0,prevZoomStatus:"",zoomStatus:"",revertLocat:null,prevLocat:null,firstOpen:!0}),O=(0,_vue.ref)(),M=(0,_vue.ref)(),B=(0,_vue.ref)(),s=(0,_vue.ref)(),n=(0,_vue.ref)(),o={refElem:O},T=(0,_vue.computed)(()=>"message"===C.type||"notification"===C.type),V=(0,_vue.computed)(()=>"minimize"===k.zoomStatus),m=(0,_vue.computed)(()=>"maximize"===k.zoomStatus),l=(0,_vue.computed)(()=>Object.assign({},(0,_ui.getConfig)().modal.zoomConfig,C.zoomConfig)),z={computeSize:S,computeZoomOpts:l},U={xID:t,props:C,context:e,reactData:k,getRefMaps:()=>o,getComputeMaps:()=>z};let w={};const D=()=>{return M.value},a=()=>{var{width:e,height:t}=C,o=D();return o&&(o.style.width=""+(e?isNaN(e)?e:e+"px":""),o.style.height=""+(t?isNaN(t)?t:t+"px":"")),(0,_vue.nextTick)()},u=()=>{var e=C["zIndex"],t=k["modalZindex"];e?k.modalZindex=e:t<(0,_utils.getLastZIndex)()&&(k.modalZindex=(0,_utils.nextZIndex)())},d=()=>(0,_vue.nextTick)().then(()=>{var o=C["position"],i=_xeUtils.default.toNumber(C.marginSize),l=D();if(l){var a=document.documentElement.clientWidth||document.body.clientWidth,s=document.documentElement.clientHeight||document.body.clientHeight,n="center"===o,{top:o,left:u}=_xeUtils.default.isString(o)?{top:o,left:o}:Object.assign({},o),r=n||"center"===o;let e="",t="";t=u&&!(n||"center"===u)?isNaN(u)?u:u+"px":Math.max(i,a/2-l.offsetWidth/2)+"px",e=o&&!r?isNaN(o)?o:o+"px":Math.max(i,s/2-l.offsetHeight/2)+"px",l.style.top=e,l.style.left=t}}),r=()=>{(0,_vue.nextTick)(()=>{var e=C["type"],e="notification"===e?notifyQueue:msgQueue;let o=0;e.forEach(e=>{var t=e.getBox();t&&(o+=_xeUtils.default.toNumber(e.props.top),e.reactData.modalTop=o,o+=t.clientHeight)})})},c=()=>{var e=C["type"],e="notification"===e?notifyQueue:msgQueue;-1<e.indexOf(U)&&_xeUtils.default.remove(e,e=>e===U),r()},i=e=>{const t=C["remember"];var o=k["visible"];const i=T.value;var l=C.beforeHideMethod||(0,_ui.getConfig)().modal.beforeHideMethod;const a={type:e};return o&&Promise.resolve(l?l(a):null).then(e=>{_xeUtils.default.isError(e)||(i&&c(),k.contentVisible=!1,t||b(),_xeUtils.default.remove(allActiveModals,e=>e===U),w.dispatchEvent("before-hide",a,null),setTimeout(()=>{k.visible=!1,v("update:modelValue",!1),w.dispatchEvent("hide",a,null)},200))}).catch(e=>e),(0,_vue.nextTick)()},L=e=>{var t="close";w.dispatchEvent(t,{type:t},e),i(t)},Z=e=>{var t="confirm";w.dispatchEvent(t,{type:t},e),i(t)},$=e=>{var t="cancel";w.dispatchEvent(t,{type:t},e),i(t)},f=e=>{var t=(0,_ui.getConfig)().version,e=_xeUtils.default.toStringJSON(localStorage.getItem(e)||"");return e&&e._v===t?e:{_v:t}},E=()=>{var{id:e,remember:t,storage:o,storageKey:i}=C,l=k["revertLocat"];e&&t&&o&&(t=D())&&((o=f(i))[e]=[t.style.left,t.style.top,t.style.width,t.style.height].concat(l?[l.left,l.top,l.width,l.height]:[]).map(e=>e?_xeUtils.default.toNumber(e):"").join(","),localStorage.setItem(i,_xeUtils.default.toJSONString(o)))},g=()=>{const{minimizeLayout:e,minimizeMaxSize:t,minimizeHorizontalOffset:s,minimizeVerticalOffset:n,minimizeOffsetMethod:u}=l.value,r="horizontal"===e,m=k.zoomStatus,o=[],i=[],d=(allActiveModals.forEach(e=>{e.xID!==U.xID&&"modal"===e.props.type&&"minimize"===e.reactData.zoomStatus&&("horizontal"===e.getComputeMaps().computeZoomOpts.value.minimizeLayout?o:i).push(e)}),r?o:i);return t&&d.length>=t?(_ui.VxeUI.modal&&_ui.VxeUI.modal.message({status:"error",content:(0,_ui.getI18n)("vxe.modal.miniMaxSize",[t])}),(0,_vue.nextTick)()):(k.prevZoomStatus=m,k.zoomStatus="minimize",(0,_vue.nextTick)().then(()=>{var e=D();if(e){var i=B.value;if(i){var l=(0,_dom.getDomNode)()["visibleHeight"],a=(m||(k.revertLocat={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth+(e.style.width?0:1),height:e.offsetHeight+(e.style.height?0:1)}),_xeUtils.default[r?"max":"min"](d,e=>{e=e.getBox();return e?_xeUtils.default.toNumber(e.style[r?"left":"top"]):0}));let t=l-i.offsetHeight-16,o=16;if(a){l=a.getBox();if(l){a=_xeUtils.default.toNumber(l.style.left),l=_xeUtils.default.toNumber(l.style.top);let e={};e=r?Object.assign({},s):Object.assign({},n),o=a+_xeUtils.default.toNumber(e.left),t=l+_xeUtils.default.toNumber(e.top),u&&(e=u({$modal:U,left:o,top:t}),o=_xeUtils.default.toNumber(e.left),t=_xeUtils.default.toNumber(e.top))}}Object.assign(e.style,{top:t+"px",left:o+"px",width:"200px",height:i.offsetHeight+"px"}),E()}}}))},p=()=>{const t=k.zoomStatus;return k.prevZoomStatus=t,k.zoomStatus="maximize",(0,_vue.nextTick)().then(()=>{var e=D();e&&(t||(k.revertLocat={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth+(e.style.width?0:1),height:e.offsetHeight+(e.style.height?0:1)}),Object.assign(e.style,{top:"0",left:"0",width:"100%",height:"100%"})),E()})};let _=null;const h=()=>{var e=C["duration"];-1!==e&&(_=setTimeout(()=>i("close"),_xeUtils.default.toNumber(e)))},x=()=>{const{remember:m,showFooter:o}=C;var{initialized:e,visible:t}=k,i=T.value;return e||(k.initialized=!0),t||(m||a(),k.visible=!0,k.contentVisible=!1,u(),allActiveModals.push(U),setTimeout(()=>{k.contentVisible=!0,(0,_vue.nextTick)(()=>{o&&(e=s.value,t=n.value,e=e||t)&&e.focus();var e,t={type:""};v("update:modelValue",!0),w.dispatchEvent("show",t,null)})},10),i?(-1===(e="notification"===(e=C.type)?notifyQueue:msgQueue).indexOf(U)&&e.push(U),r(),h()):(0,_vue.nextTick)(()=>{var e,t,o,i,l,a,s,n,u=C["fullscreen"],r=k["firstOpen"];m&&!r||d().then(()=>{setTimeout(()=>d(),20)}),r&&(k.firstOpen=!1,(()=>{var{id:e,remember:t,storage:o,storageKey:i}=C;return!!(e&&t&&o&&f(i)[e])})())?({id:r,remember:a,storage:s,storageKey:n}=C,r&&a&&s&&(a=f(n)[r])&&(s=D(),[n,r,a,e,t,o,i,l]=a.split(","),s&&(n&&(s.style.left=n+"px"),r&&(s.style.top=r+"px"),a&&(s.style.width=a+"px"),e)&&(s.style.height=e+"px"),t)&&o&&(k.revertLocat={left:t,top:o,width:i,height:l})):u&&(0,_vue.nextTick)(()=>p())})),(0,_vue.nextTick)()},H=e=>{var t=O.value;C.maskClosable&&e.target===t&&i("mask")},A=()=>{null!==_&&T.value&&(clearTimeout(_),_=null)},j=()=>{null===_&&T.value&&h()},q=e=>{if(_ui.globalEvents.hasKey(e,_ui.GLOBAL_EVENT_KEYS.ESCAPE)){const t=_xeUtils.default.max(allActiveModals,e=>e.reactData.modalZindex);t&&setTimeout(()=>{t===U&&t.props.escClosable&&i("exit")},10)}};const b=()=>(k.prevZoomStatus=k.zoomStatus,(k.zoomStatus="",_vue.nextTick)().then(()=>{var e,t=k["revertLocat"];if(t)return e=D(),k.revertLocat=null,e&&Object.assign(e.style,{top:t.top+"px",left:t.left+"px",width:t.width+"px",height:t.height+"px"}),E(),(0,_vue.nextTick)()})),y=t=>{const o=k["zoomStatus"];return new Promise(e=>{if(t)return"maximize"===t?void e(p()):"minimize"===t?void e(g()):void e(b());e((o?b:p)())}).then(()=>k.zoomStatus||"revert")},W=t=>{var{zoomStatus:e,prevZoomStatus:o}=k;return y("minimize"===e?o||"revert":"minimize").then(e=>{e={type:e};w.dispatchEvent("zoom",e,t)})},I=t=>y().then(e=>{e={type:e};w.dispatchEvent("zoom",e,t)});const Y=()=>{const t=k["modalZindex"];allActiveModals.some(e=>e.reactData.visible&&e.reactData.modalZindex>t)&&u()},X=e=>{const{remember:t,storage:o}=C;var i=k["zoomStatus"];const n=_xeUtils.default.toNumber(C.marginSize),u=D();if(u&&"maximize"!==i&&0===e.button&&!(0,_dom.getEventTargetNode)(e,u,"trigger--btn").flag){e.preventDefault();const l=document.onmousemove,a=document.onmouseup,r=e.clientX-u.offsetLeft,m=e.clientY-u.offsetTop,{visibleHeight:d,visibleWidth:c}=(0,_dom.getDomNode)();document.onmousemove=e=>{e.preventDefault();var t=u.offsetWidth,o=u.offsetHeight,i=n,t=c-t-n-1,l=n,o=d-o-n-1;let a=e.clientX-r,s=e.clientY-m;(a=a>t?t:a)<i&&(a=i),(s=s>o?o:s)<l&&(s=l),u.style.left=a+"px",u.style.top=s+"px",u.className=u.className.replace(/\s?is--drag/,"")+" is--drag",v("move",(0,_ui.createEvent)(e,{type:"move"}))},document.onmouseup=()=>{document.onmousemove=l,document.onmouseup=a,t&&o&&(0,_vue.nextTick)(()=>{E()}),setTimeout(()=>{u.className=u.className.replace(/\s?is--drag/,"")},50)}}},Q=e=>{e.preventDefault();const{remember:a,storage:s}=C,{visibleHeight:n,visibleWidth:u}=(0,_dom.getDomNode)(),r=_xeUtils.default.toNumber(C.marginSize);const m=e.target.getAttribute("type"),d=_xeUtils.default.toNumber(C.minWidth),c=_xeUtils.default.toNumber(C.minHeight),v=u,f=n,g=D(),t=document.onmousemove,o=document.onmouseup,p=g.clientWidth,_=g.clientHeight,h=e.clientX,x=e.clientY,b=g.offsetTop,y=g.offsetLeft,z={type:"resize"};document.onmousemove=e=>{e.preventDefault();let t,o,i,l;switch(m){case"wl":t=h-e.clientX,i=t+p,y-t>r&&i>d&&(g.style.width=`${i<v?i:v}px`,g.style.left=y-t+"px");break;case"swst":t=h-e.clientX,o=x-e.clientY,i=t+p,l=o+_,y-t>r&&i>d&&(g.style.width=`${i<v?i:v}px`,g.style.left=y-t+"px"),b-o>r&&l>c&&(g.style.height=`${l<f?l:f}px`,g.style.top=b-o+"px");break;case"swlb":t=h-e.clientX,o=e.clientY-x,i=t+p,l=o+_,y-t>r&&i>d&&(g.style.width=`${i<v?i:v}px`,g.style.left=y-t+"px"),b+l+r<n&&l>c&&(g.style.height=`${l<f?l:f}px`);break;case"st":o=x-e.clientY,l=_+o,b-o>r&&l>c&&(g.style.height=`${l<f?l:f}px`,g.style.top=b-o+"px");break;case"wr":t=e.clientX-h,i=t+p,y+i+r<u&&i>d&&(g.style.width=`${i<v?i:v}px`);break;case"sest":t=e.clientX-h,o=x-e.clientY,i=t+p,l=o+_,y+i+r<u&&i>d&&(g.style.width=`${i<v?i:v}px`),b-o>r&&l>c&&(g.style.height=`${l<f?l:f}px`,g.style.top=b-o+"px");break;case"selb":t=e.clientX-h,o=e.clientY-x,i=t+p,l=o+_,y+i+r<u&&i>d&&(g.style.width=`${i<v?i:v}px`),b+l+r<n&&l>c&&(g.style.height=`${l<f?l:f}px`);break;case"sb":o=e.clientY-x,l=o+_,b+l+r<n&&l>c&&(g.style.height=`${l<f?l:f}px`)}g.className=g.className.replace(/\s?is--drag/,"")+" is--drag",a&&s&&E(),w.dispatchEvent("resize",z,e)},document.onmouseup=()=>{k.revertLocat=null,document.onmousemove=t,document.onmouseup=o,setTimeout(()=>{g.className=g.className.replace(/\s?is--drag/,"")},50)}},F=(w={dispatchEvent(e,t,o){v(e,(0,_ui.createEvent)(o,{$modal:U},t))},open:x,close(){return i("close")},getBox:D,getPosition:()=>{if(!T.value){var e=D();if(e)return{top:e.offsetTop,left:e.offsetLeft}}return null},setPosition:(e,t)=>{var o;return T.value||(o=D())&&(_xeUtils.default.isNumber(e)&&(o.style.top=e+"px"),_xeUtils.default.isNumber(t))&&(o.style.left=t+"px"),(0,_vue.nextTick)()},isMinimized:()=>"minimize"===k.zoomStatus,isMaximized:()=>"maximize"===k.zoomStatus,zoom:y,minimize:g,maximize:p,revert:b},Object.assign(U,w),()=>{var{slots:e={},showClose:t,showZoom:o,showMaximize:i,showMinimize:l,title:a}=C,s=k["zoomStatus"],n=N.title||e.title,e=N.corner||e.corner,u=V.value,r=m.value;return[(0,_vue.h)("div",{class:"vxe-modal--header-title"},n?(0,_vn.getSlotVNs)(n({$modal:U,minimized:u,maximized:r})):a?(0,_utils.getFuncText)(a):(0,_ui.getI18n)("vxe.alert.title")),(0,_vue.h)("div",{class:"vxe-modal--header-right"},[e&&!u?(0,_vue.h)("div",{class:"vxe-modal--corner-wrapper"},(0,_vn.getSlotVNs)(e({$modal:U}))):(0,_vue.createCommentVNode)(),(_xeUtils.default.isBoolean(l)?l:o)?(0,_vue.h)("div",{class:["vxe-modal--zoom-btn","trigger--btn"],title:(0,_ui.getI18n)("vxe.modal.zoom"+("minimize"===s?"Out":"Min")),onClick:W},[(0,_vue.h)("i",{class:"minimize"===s?(0,_ui.getIcon)().MODAL_ZOOM_REVERT:(0,_ui.getIcon)().MODAL_ZOOM_MIN})]):(0,_vue.createCommentVNode)(),(_xeUtils.default.isBoolean(i)?i:o)&&"minimize"!==s?(0,_vue.h)("div",{class:["vxe-modal--zoom-btn","trigger--btn"],title:(0,_ui.getI18n)("vxe.modal.zoom"+("maximize"===s?"Out":"In")),onClick:I},[(0,_vue.h)("i",{class:"maximize"===s?(0,_ui.getIcon)().MODAL_ZOOM_OUT:(0,_ui.getIcon)().MODAL_ZOOM_IN})]):(0,_vue.createCommentVNode)(),t?(0,_vue.h)("div",{class:["vxe-modal--close-btn","trigger--btn"],title:(0,_ui.getI18n)("vxe.modal.close"),onClick:L},[(0,_vue.h)("i",{class:(0,_ui.getIcon)().MODAL_CLOSE})]):(0,_vue.createCommentVNode)()])]}),K=()=>{var{slots:e={},showCancelButton:t,showConfirmButton:o,type:i}=C,l=N.leftfoot||e.leftfoot,e=N.rightfoot||e.rightfoot,a=[];return(_xeUtils.default.isBoolean(t)?t:"confirm"===i)&&a.push((0,_vue.h)(_button.default,{key:1,ref:n,content:C.cancelButtonText||(0,_ui.getI18n)("vxe.button.cancel"),onClick:$})),(_xeUtils.default.isBoolean(o)?o:"confirm"===i||"alert"===i)&&a.push((0,_vue.h)(_button.default,{key:2,ref:s,status:"primary",content:C.confirmButtonText||(0,_ui.getI18n)("vxe.button.confirm"),onClick:Z})),(0,_vue.h)("div",{class:"vxe-modal--footer-wrapper"},[(0,_vue.h)("div",{class:"vxe-modal--footer-left"},l?(0,_vn.getSlotVNs)(l({$modal:U})):[]),(0,_vue.h)("div",{class:"vxe-modal--footer-right"},e?(0,_vn.getSlotVNs)(e({$modal:U})):a)])};return U.renderVN=()=>{var{slots:e={},className:t,type:o,animat:i,draggable:l,iconStatus:a,position:s,loading:n,destroyOnClose:u,status:r,lockScroll:m,padding:d,lockView:c,mask:v,resize:f}=C,{initialized:g,modalTop:p,contentVisible:_,visible:h,zoomStatus:x}=k,e=N.aside||e.aside,b=S.value,y=T.value,z=V.value,w={};return y&&(w.onMouseover=A,w.onMouseout=j),(0,_vue.h)(_vue.Teleport,{to:"body",disabled:!C.transfer||!g},[(0,_vue.h)("div",Object.assign({ref:O,class:["vxe-modal--wrapper","type--"+o,"zoom--"+(x||"revert"),t||"",s?"pos--"+s:"",{["size--"+b]:b,["status--"+r]:r,"is--padding":d,"is--animat":i,"lock--scroll":m,"lock--view":c,"is--draggable":l,"is--resize":f,"is--mask":v,"is--visible":_,"is--active":h,"is--loading":n}],style:{zIndex:k.modalZindex,top:p?p+"px":null},onClick:H},w),[(0,_vue.h)("div",{ref:M,class:"vxe-modal--box",onMousedown:Y},[!y&&!e||z?(0,_vue.createCommentVNode)():(0,_vue.h)("div",{class:"vxe-modal--aside"},e?(0,_vn.getSlotVNs)(e({$modal:U})):[r||a?(0,_vue.h)("div",{class:"vxe-modal--status-wrapper"},[(0,_vue.h)("i",{class:["vxe-modal--status-icon",a||(0,_ui.getIcon)()[("MODAL_"+r).toLocaleUpperCase()]]})]):(0,_vue.createCommentVNode)()]),(0,_vue.h)("div",{class:"vxe-modal--container"},!k.initialized||u&&!k.visible?[]:[(()=>{var e,{slots:t={},showZoom:o,showMaximize:i,draggable:l}=C,a=T.value,t=N.header||t.header;return C.showHeader?(e={},l&&(e.onMousedown=X),(_xeUtils.default.isBoolean(i)?i:o)&&C.dblclickZoom&&"modal"===C.type&&(e.onDblclick=I),(0,_vue.h)("div",Object.assign({ref:B,class:["vxe-modal--header",{"is--ellipsis":!a&&C.showTitleOverflow}]},e),t?(0,_vn.getSlotVNs)(t({$modal:U})):F())):(0,_vue.createCommentVNode)()})(),(()=>{var{slots:e={},status:t,message:o,iconStatus:i}=C,o=C.content||o,l=T.value,a=N.default||e.default,s=N.left||e.left,e=N.right||e.right,n=[];return l||!t&&!i||n.push((0,_vue.h)("div",{class:"vxe-modal--status-wrapper"},[(0,_vue.h)("i",{class:["vxe-modal--status-icon",i||(0,_ui.getIcon)()[("MODAL_"+t).toLocaleUpperCase()]]})])),n.push((0,_vue.h)("div",{class:"vxe-modal--content"},a?(0,_vn.getSlotVNs)(a({$modal:U})):(0,_utils.getFuncText)(o))),(0,_vue.h)("div",{class:"vxe-modal--body"},[s?(0,_vue.h)("div",{class:"vxe-modal--body-left"},(0,_vn.getSlotVNs)(s({$modal:U}))):(0,_vue.createCommentVNode)(),(0,_vue.h)("div",{class:"vxe-modal--body-default"},n),e?(0,_vue.h)("div",{class:"vxe-modal--body-right"},(0,_vn.getSlotVNs)(e({$modal:U}))):(0,_vue.createCommentVNode)(),l?(0,_vue.createCommentVNode)():(0,_vue.h)(_index.default,{class:"vxe-modal--loading",modelValue:C.loading})])})(),(()=>{var{slots:e={}}=C,e=N.footer||e.footer;return C.showFooter?(0,_vue.h)("div",{class:"vxe-modal--footer"},e?(0,_vn.getSlotVNs)(e({$modal:U})):[K()]):(0,_vue.createCommentVNode)()})(),!y&&f?(0,_vue.h)("span",{class:"vxe-modal--resize"},["wl","wr","swst","sest","st","swlb","selb","sb"].map(e=>(0,_vue.h)("span",{class:e+"-resize",type:e,onMousedown:Q}))):(0,_vue.createCommentVNode)()])])])])},(0,_vue.watch)(()=>C.width,a),(0,_vue.watch)(()=>C.height,a),(0,_vue.watch)(()=>C.modelValue,e=>{e?x():i("model")}),(0,_vue.onMounted)(()=>{(0,_vue.nextTick)(()=>{C.storage&&!C.id&&(0,_log.errLog)("vxe.error.reqProp",["modal.id"]),C.modelValue&&x(),a()}),C.escClosable&&_ui.globalEvents.on(U,"keydown",q)}),(0,_vue.onUnmounted)(()=>{_ui.globalEvents.off(U,"keydown"),c()}),(0,_vue.provide)("$xeModal",U),U},render(){return this.renderVN()}});