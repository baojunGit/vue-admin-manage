"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_ui=require("../../ui"),_utils=require("../../ui/src/utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=exports.default=(0,_vue.defineComponent)({name:"VxeSwitch",props:{modelValue:[String,Number,Boolean],disabled:{type:Boolean,default:null},size:{type:String,default:()=>(0,_ui.getConfig)().switch.size||(0,_ui.getConfig)().size},openLabel:String,closeLabel:String,openValue:{type:[String,Number,Boolean],default:!0},closeValue:{type:[String,Number,Boolean],default:!1},openIcon:String,closeIcon:String,openActiveIcon:String,closeActiveIcon:String},emits:["update:modelValue","change","focus","blur"],setup(c,e){const i=e["emit"],u=(0,_vue.inject)("$xeForm",null),l=(0,_vue.inject)("xeFormItemInfo",null);var t=_xeUtils.default.uniqueId();const r=(0,_ui.useSize)(c)["computeSize"],v=(0,_vue.reactive)({isActivated:!1,hasAnimat:!1,offsetLeft:0}),a={xID:t,props:c,context:e,reactData:v},d=(0,_vue.ref)();let n={};const p=(0,_vue.computed)(()=>{var e=c["disabled"];return null===e?!!u&&(u.props.readonly||u.props.disabled):e}),_=(0,_vue.computed)(()=>(0,_utils.getFuncText)(c.openLabel)),m=(0,_vue.computed)(()=>(0,_utils.getFuncText)(c.closeLabel)),f=(0,_vue.computed)(()=>c.modelValue===c.openValue);let s;const h=e=>{var t;p.value||(t=f.value,clearTimeout(s),t=t?c.closeValue:c.openValue,v.hasAnimat=!0,i("update:modelValue",t),n.dispatchEvent("change",{value:t},e),u&&l&&u.triggerItemEvent(e,l.itemConfig.field,t),s=setTimeout(()=>{v.hasAnimat=!1},400))},b=e=>{v.isActivated=!0,n.dispatchEvent("focus",{value:c.modelValue},e)},x=e=>{v.isActivated=!1,n.dispatchEvent("blur",{value:c.modelValue},e)};n={dispatchEvent(e,t,u){i(e,(0,_ui.createEvent)(u,{$switch:a},t))},focus(){var e=d.value;return v.isActivated=!0,e.focus(),(0,_vue.nextTick)()},blur(){return d.value.blur(),(v.isActivated=!1,_vue.nextTick)()}},Object.assign(a,n);return a.renderVN=()=>{var{openIcon:e,closeIcon:t,openActiveIcon:u,closeActiveIcon:i}=c,l=r.value,a=f.value,n=_.value,s=m.value,o=p.value;return(0,_vue.h)("div",{class:["vxe-switch",a?"is--on":"is--off",{["size--"+l]:l,"is--disabled":o,"is--animat":v.hasAnimat}]},[(0,_vue.h)("button",{ref:d,class:"vxe-switch--button",type:"button",disabled:o,onClick:h,onFocus:b,onBlur:x},[(0,_vue.h)("span",{class:"vxe-switch--label vxe-switch--label-on"},[e?(0,_vue.h)("i",{class:["vxe-switch--label-icon",e]}):(0,_vue.createCommentVNode)(),n]),(0,_vue.h)("span",{class:"vxe-switch--label vxe-switch--label-off"},[t?(0,_vue.h)("i",{class:["vxe-switch--label-icon",t]}):(0,_vue.createCommentVNode)(),s]),(0,_vue.h)("span",{class:["vxe-switch--icon"]},u||i?[(0,_vue.h)("i",{class:a?u:i})]:[])])])},a},render(){return this.renderVN()}});